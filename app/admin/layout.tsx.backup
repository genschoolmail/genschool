}) {
  const session = await auth();
  const user = session?.user;

  return (
    <div className="flex h-screen bg-slate-50 dark:bg-slate-900 font-sans">
      {/* Sidebar */}
      <aside className="w-72 bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border-r border-slate-200 dark:border-slate-700 hidden md:flex flex-col shadow-2xl z-20">
        <div className="p-8 flex items-center justify-center border-b border-slate-100 dark:border-slate-700/50">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/30">
              <span className="text-white font-bold text-xl">S</span>
            </div>
            <div>
              <h1 className="text-xl font-bold text-slate-800 dark:text-white tracking-tight">School ERP</h1>
              <p className="text-xs text-slate-500 dark:text-slate-400 font-medium">Pro Edition</p>
            </div>
          </div>
        </div>

        <nav className="flex-1 overflow-y-auto py-6 px-4 space-y-1">
          <p className="px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Main Menu</p>
          <NavItem href="/admin" icon={<LayoutDashboard />} label="Dashboard" active />
          <NavItem href="/admin/students" icon={<Users />} label="Students" />
          <NavItem href="/admin/teachers" icon={<Users />} label="Teachers" />
          <NavItem href="/admin/academics" icon={<BookOpen />} label="Academics" />

          <p className="px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mt-6 mb-2">Finance & Transport</p>
          <NavItem href="/admin/finance" icon={<IndianRupee />} label="Finance" />
          <NavItem href="/admin/transport" icon={<Bus />} label="Transport" />

          <p className="px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mt-6 mb-2">Management</p>
          <NavItem href="/admin/attendance" icon={<Calendar />} label="Attendance" />
          <NavItem href="/admin/attendance/reports" icon={<Calendar />} label="Reports" />
          <NavItem href="/admin/exams" icon={<BookOpen />} label="Exams" />
          <NavItem href="/admin/library" icon={<BookOpen />} label="Library" />
          <NavItem href="/admin/inventory" icon={<Settings />} label="Inventory" />

          <p className="px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mt-6 mb-2">Communication & Security</p>
          <NavItem href="/admin/communication" icon={<MessageSquare />} label="Communication" />
          <NavItem href="/admin/visitors" icon={<UserCheck />} label="Visitors" />
        </nav>

        <div className="p-4 border-t border-slate-200 dark:border-slate-700">
          <form action={async () => {
            'use server';
            await signOut();
          }}>
            <button type="submit" className="flex items-center w-full px-4 py-3 text-slate-600 dark:text-slate-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400 rounded-xl transition-all duration-200 group">
              <LogOut className="w-5 h-5 mr-3 group-hover:scale-110 transition-transform" />
              <span className="font-medium">Sign Out</span>
            </button>
          </form>
        </div>
      </aside>

      {/* Main Content */}
      <div className="flex-1 flex flex-col overflow-hidden relative">
      </div>
      <div className="w-10 h-10 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold shadow-md ring-2 ring-white dark:ring-slate-800">
        {(user?.name || 'U').charAt(0)}
      </div>
    </div>
          </div >
        </header >

    {/* Page Content */ }
    < main className = "flex-1 overflow-y-auto p-8 relative z-0 scrollbar-hide" >
      { children }
        </main >
      </div >
    </div >
  );
}

function NavItem({ href, icon, label, active = false }: { href: string; icon: React.ReactNode; label: string; active?: boolean }) {
  return (
    <Link href={href} className={`flex items-center px-4 py-3 rounded-xl transition-all duration-200 group ${active
      ? 'bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 font-semibold'
      : 'text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200'
      }`}>
      <span className={`w-5 h-5 mr-3 transition-colors ${active ? 'text-indigo-600 dark:text-indigo-400' : 'text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300'}`}>
        {icon}
      </span>
      {label}
    </Link>
  );
}
